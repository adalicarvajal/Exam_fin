<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Redes</title>
  <style>
    :root {
      --primary-color: #2c3e50;
      --secondary-color: #34db55;
      --accent-color: #e74c3c;
      --light-color: #ecf0f1;
      --dark-color: #34495e;
      --bg-color: #ffffff;
      --text-color: #333333;
      --content-bg: #ffffff;
      --shadow-color: rgba(0, 0, 0, 0.1);
      --feedback-bg: rgba(255, 255, 255, 0.9);
      --opcion-hover: #d6eaf8;
      --success-color: #27ae60;
      --warning-color: #f39c12;
    }

    .dark-mode {
      --primary-color: #81c784;
      --secondary-color: #2e7d32;
      --accent-color: #ef5350;
      --light-color: #424242;
      --dark-color: #bdbdbd;
      --bg-color: #121212;
      --text-color: #e0e0e0;
      --content-bg: #1e1e1e;
      --shadow-color: rgba(0, 0, 0, 0.5);
      --feedback-bg: rgba(30, 30, 30, 0.9);
      --opcion-hover: #4a5e3a;
      --success-color: #388e3c;
      --warning-color: #f57c00;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      transition: background-color 0.3s, color 0.3s;
    }

    .container {
      width: 90%;
      max-width: 800px;
      background-color: var(--content-bg);
      border-radius: 10px;
      box-shadow: 0 4px 15px var(--shadow-color);
      padding: 30px;
      margin: 30px 0;
      transition: background-color 0.3s, box-shadow 0.3s;
    }

    h1, h2 {
      color: var(--primary-color);
      text-align: center;
      margin-bottom: 30px;
      font-size: clamp(1.8rem, 4vw, 2.2rem);
      border-bottom: 2px solid var(--secondary-color);
      padding-bottom: 10px;
      transition: color 0.3s;
    }

    .pregunta {
      background-color: var(--content-bg);
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 25px;
      box-shadow: 0 2px 8px var(--shadow-color);
      border-left: 4px solid var(--secondary-color);
      transition: transform 0.3s ease, box-shadow 0.3s, background-color 0.3s;
    }

    .pregunta:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 12px var(--shadow-color);
    }

    .pregunta label {
      display: block;
      font-weight: 600;
      color: var(--primary-color);
      margin-bottom: 15px;
      font-size: clamp(1rem, 2vw, 1.1rem);
      line-height: 1.4;
      transition: color 0.3s;
    }

    .opciones {
      margin: 15px 0;
    }

    .opcion {
      display: block;
      margin: 10px 0;
      padding: 10px 15px;
      background-color: var(--light-color);
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.2s ease;
      color: var(--text-color);
    }

    .opcion:hover {
      background-color: var(--opcion-hover);
    }

    .opcion input {
      margin-right: 10px;
    }

    .botones {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    button {
      padding: 12px 25px;
      border: none;
      border-radius: 5px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .verificar {
      background-color: var(--secondary-color);
      color: white;
    }

    .verificar:hover {
      background-color: var(--primary-color);
      transform: translateY(-2px);
    }

    .reiniciar {
      background-color: var(--accent-color);
      color: white;
      margin-top: 30px;
    }

    .reiniciar:hover {
      background-color: #c0392b;
      transform: translateY(-2px);
    }

    .feedback {
      margin-top: 15px;
      padding: 12px;
      border-radius: 5px;
      font-weight: 600;
      display: none;
      background-color: var(--feedback-bg);
    }

    .correcto {
      color: var(--success-color);
      border-left: 4px solid var(--success-color);
    }

    .incorrecto {
      color: var(--accent-color);
      border-left: 4px solid var(--accent-color);
    }

    .resultados {
      text-align: center;
      margin-top: 30px;
      padding: 20px;
      background-color: var(--light-color);
      border-radius: 8px;
      display: none;
      color: var(--text-color);
    }

    .progress-container {
      width: 100%;
      background-color: var(--dark-color);
      border-radius: 5px;
      margin: 20px 0;
    }

    .progress-bar {
      height: 20px;
      background-color: var(--success-color);
      border-radius: 5px;
      width: 0%;
      transition: width 0.5s ease, background-color 0.3s;
    }

    .volver-menu {
      display: inline-block;
      margin-top: 25px;
      padding: 12px 25px;
      background-color: var(--dark-color);
      color: white;
      border-radius: 5px;
      font-weight: 600;
      text-decoration: none;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .volver-menu:hover {
      background-color: var(--primary-color);
      transform: translateY(-2px);
    }

    .theme-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: var(--secondary-color);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 50%;
      cursor: pointer;
      box-shadow: 0 2px 5px var(--shadow-color);
      font-size: 1.2em;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: background-color 0.3s;
    }

    .theme-toggle:hover {
      background-color: var(--primary-color);
    }

    @media (max-width: 768px) {
      .container {
        width: 95%;
        padding: 20px;
      }

      .pregunta {
        padding: 15px;
      }

      button, .volver-menu {
        padding: 10px 20px;
      }

      .botones {
        flex-direction: column;
        align-items: center;
      }
    }

    @media (max-width: 480px) {
      .container {
        padding: 15px;
        margin: 15px 0;
      }

      h1 {
        font-size: 1.5rem;
        margin-bottom: 20px;
      }

      .pregunta {
        padding: 12px;
        margin-bottom: 20px;
      }

      .opcion {
        padding: 8px 12px;
      }

      .feedback {
        padding: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Redes</h1>
    <form id="cuestionario"></form>

    <button class="reiniciar" onclick="reiniciarCuestionario()">Reiniciar Cuestionario</button>

    <div class="resultados" id="resultados">
      <h2>Resultados</h2>
      <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      <p id="puntuacion"></p>
    </div>

    <div class="botones">
      <a href="../index.html" class="volver-menu">‚Üê Volver al Men√∫ Principal</a>
    </div>
  </div>

  <button class="theme-toggle" id="themeToggle">üåì</button>

  <script>
    // Funci√≥n para cambiar entre modo claro y oscuro
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    
    // Verificar preferencia del usuario
    const userPrefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const currentTheme = localStorage.getItem('theme');
    
    // Aplicar tema guardado o preferencia del sistema
    if (currentTheme === 'dark' || (!currentTheme && userPrefersDark)) {
      body.classList.add('dark-mode');
      themeToggle.textContent = '‚òÄÔ∏è';
    } else {
      themeToggle.textContent = 'üåô';
    }
    
    // Alternar tema al hacer clic
    themeToggle.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      
      // Guardar preferencia
      const isDark = body.classList.contains('dark-mode');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      
      // Cambiar icono
      themeToggle.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
    });
    
    // Escuchar cambios en la preferencia del sistema
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
      const newColorScheme = e.matches ? 'dark' : 'light';
      if (!localStorage.getItem('theme')) {
        body.classList.toggle('dark-mode', newColorScheme === 'dark');
        themeToggle.textContent = newColorScheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
      }
    });

    const preguntas = [

        ["¬øQu√© tipo de red interconecta dispositivos dentro de un √°rea geogr√°fica peque√±a, como una oficina o un edificio, y generalmente es propiedad y est√° administrada por una sola organizaci√≥n?", "LAN", ["WAN", "MAN", "LAN", "PAN"]],
        ["En el contexto de redes inal√°mbricas, ¬øcu√°l de las siguientes tecnolog√≠as utiliza ondas de radio de corto alcance para la comunicaci√≥n entre dispositivos como tel√©fonos m√≥viles, auriculares y teclados, t√≠picamente dentro de un rango de 10 metros?", "Bluetooth", ["Wi-Fi", "Zigbee", "Bluetooth", "NFC"]],
        ["¬øCu√°l de las siguientes afirmaciones describe mejor el prop√≥sito de una VLAN (Virtual LAN)?", "Segmentar una red f√≠sica en m√∫ltiples dominios de broadcast l√≥gicos.", ["Segmentar una red f√≠sica en m√∫ltiples dominios de broadcast l√≥gicos.", "Aumentar el ancho de banda total disponible en una red Ethernet.", "Proporcionar redundancia en enlaces de red de √°rea amplia.", "Asignar direcciones IP p√∫blicas a dispositivos privados."]],
        ["Un administrador de red necesita configurar un enrutamiento que no cambie a menos que sea modificado manualmente. ¬øQu√© tipo de enrutamiento ser√≠a el m√°s apropiado para esta situaci√≥n?", "Enrutamiento est√°tico", ["Enrutamiento din√°mico con OSPF", "Enrutamiento din√°mico con EIGRP", "Enrutamiento est√°tico", "Enrutamiento basado en pol√≠ticas"]],
        ["En el contexto de las tecnolog√≠as Ethernet, ¬øcu√°l de las siguientes opciones ofrece una velocidad de transmisi√≥n de datos de 100 Mbps?", "Fast Ethernet", ["Ethernet est√°ndar", "Gigabit Ethernet", "Fast Ethernet", "10 Gigabit Ethernet"]],
        ["¬øQu√© clase de direcci√≥n IP, en el esquema de direccionamiento IPv4, est√° dise√±ada principalmente para redes grandes y puede tener hasta 16.777.214 hosts por red?", "Clase A", ["Clase A", "Clase B", "Clase C", "Clase D"]],
        ["Si se tiene una red con la direcci√≥n 192.168.10.0/24 y se necesita dividirla en 4 subredes de igual tama√±o utilizando FLSM (Fixed Length Subnet Mask), ¬øcu√°l ser√≠a la nueva m√°scara de subred en notaci√≥n CIDR?", "/26", ["/25", "/26", "/27", "/28"]],
        ["¬øCu√°l es la principal ventaja de utilizar enrutamiento din√°mico sobre enrutamiento est√°tico en una red grande y compleja?", "Adaptaci√≥n autom√°tica a cambios en la topolog√≠a de la red.", ["Mayor seguridad de la red.", "Menor consumo de recursos del router.", "Adaptaci√≥n autom√°tica a cambios en la topolog√≠a de la red.", "Configuraci√≥n inicial m√°s sencilla."]],
        ["¬øQu√© tecnolog√≠a de red es un protocolo de conmutaci√≥n de paquetes que opera en la capa de enlace de datos y fue popular para interconectar redes de √°rea local a trav√©s de enlaces WAN, especialmente antes de la proliferaci√≥n de MPLS?", "Frame Relay", ["ATM", "DSL", "Frame Relay", "ISDN"]],
        ["Un dispositivo de red opera principalmente en la Capa 2 (Enlace de Datos) del modelo OSI y es utilizado para conectar segmentos de red, enviando tramas solo al puerto de destino correspondiente. ¬øQu√© tipo de dispositivo es?", "Switch", ["Router", "Hub", "Switch", "Repetidor"]],
        ["¬øCu√°l de las siguientes descripciones corresponde a una red MAN (Metropolitan Area Network)?", "Una red que interconecta ciudades dentro de una regi√≥n o un campus universitario grande.", ["Una red que cubre una peque√±a √°rea geogr√°fica, como una casa o una oficina.", "Una red que abarca una gran √°rea geogr√°fica, como un pa√≠s o continente.", "Una red que interconecta ciudades dentro de una regi√≥n o un campus universitario grande.", "Una red personal para la interconexi√≥n de dispositivos cercanos."]],
        ["En una red que utiliza el direccionamiento IPv4, ¬øqu√© m√°scara de subred permite tener 62 hosts en una subred dada?", "255.255.255.192 (/26)", ["255.255.255.192 (/26)", "255.255.255.224 (/27)", "255.255.255.240 (/28)", "255.255.255.248 (/29)"]],
        ["¬øQu√© caracter√≠stica fundamental diferencia a Gigabit Ethernet de Fast Ethernet?", "La velocidad de transmisi√≥n de datos.", ["El tipo de cableado utilizado.", "La velocidad de transmisi√≥n de datos.", "La compatibilidad con VLANs.", "La capacidad de operar en modo full-duplex."]],
        ["Si un router recibe un paquete con una direcci√≥n IP de destino para la cual no tiene una ruta espec√≠fica en su tabla de enrutamiento, ¬øqu√© acci√≥n tomar√° el router si tiene una ruta por defecto configurada?", "Reenviar√° el paquete a la interfaz asociada con la ruta por defecto.", ["Descartar√° el paquete inmediatamente.", "Enviar√° un mensaje ICMP \"Destination Unreachable\" al origen.", "Reenviar√° el paquete a la interfaz asociada con la ruta por defecto.", "Intentar√° aprender una nueva ruta din√°micamente."]],
        ["¬øCu√°l de las siguientes afirmaciones es CORRECTA sobre el direccionamiento IP en redes de computadoras?", "La m√°scara de subred define la porci√≥n de red y la porci√≥n de host de una direcci√≥n IP.", ["Las direcciones IP p√∫blicas son √∫nicas dentro de una red local.", "Las direcciones IP privadas son enrutables directamente a trav√©s de Internet.", "La m√°scara de subred define la porci√≥n de red y la porci√≥n de host de una direcci√≥n IP.", "Cada dispositivo en una red debe tener la misma direcci√≥n IP."]],
        ["¬øCu√°l es la funci√≥n principal de un Sistema Operativo?", "Gestionar el hardware y proveer servicios a las aplicaciones", ["Gestionar el hardware y proveer servicios a las aplicaciones", "Desarrollar software de usuario", "Proteger la informaci√≥n mediante cifrado", "Realizar copias de seguridad autom√°ticamente"]],
        ["¬øCu√°l de los siguientes NO es un tipo de sistema operativo?", "Multin√∫cleo", ["Monousuario", "Multitarea", "Multin√∫cleo", "Tiempo real"]],
        ["En la arquitectura de un sistema operativo, ¬øqu√© componente es responsable de la comunicaci√≥n entre hardware y software?", "N√∫cleo (Kernel)", ["Interfaz de usuario", "N√∫cleo (Kernel)", "Aplicaciones", "Sistema de archivos"]],
        ["¬øDe los siguientes, cu√°l es uno de los principales principios del software libre?", "Que el c√≥digo fuente est√© disponible para estudiar, modificar y distribuir", ["Que sea gratuito siempre", "Que el c√≥digo fuente est√© disponible para estudiar, modificar y distribuir", "Que sea desarrollado por una sola empresa", "Que no permita modificaciones"]],
        ["¬øCu√°l de los siguientes comandos de Linux muestra el listado de archivos en un directorio?", "ls", ["pwd", "ls", "cd", "mkdir"]],
        ["¬øCu√°l es la funci√≥n principal del comando ps en Linux?", "Mostrar procesos activos", ["Mostrar procesos activos", "Cambiar permisos de archivos", "Apagar el sistema", "Instalar programas"]],
        ["¬øQu√© significa BCP en el contexto de sistemas operativos y seguridad?", "Business Continuity Plan", ["Backup Control Program", "Business Continuity Plan", "Block Process Control", "Binary Code Protocol"]],
        ["¬øCu√°les son los cinco estados cl√°sicos de un proceso?", "Nuevo, listo, ejecuci√≥n, bloqueado, terminado", ["Nuevo, listo, ejecuci√≥n, bloqueado, terminado", "Inicio, pausa, ejecuci√≥n, espera, fin", "Activo, inactivo, listo, detenido, reiniciado", "Nuevo, espera, pausa, ejecuci√≥n, finalizado"]],
        ["¬øCu√°l es la ventaja principal de utilizar hilos (threads) en lugar de procesos?", "Permiten compartir memoria y son m√°s ligeros", ["Consumen m√°s recursos", "Se ejecutan en m√°quinas diferentes", "Permiten compartir memoria y son m√°s ligeros", "No permiten multitarea"]],
        ["¬øCu√°l de los siguientes es un algoritmo de planificaci√≥n de procesos en sistemas operativos?", "FCFS (FIRST COME, FIRST SERV)", ["FCFS (FIRST COME, FIRST SERV)", "TCP/IP", "RAID 5", "DNS"]],
        ["En ext4, ¬øqu√© modo de journaling garantiza la m√°xima integridad de datos al costo de rendimiento?", "data=journal", ["data=writeback", "data=ordered", "data=journal", "data=unordered"]],
        ["¬øQu√© es un ataque de ‚Äúdenegaci√≥n de servicio‚Äù (DoS) en redes IP?", "Interrupci√≥n del servicio para usuarios leg√≠timos", ["Acceso no autorizado a datos", "Interrupci√≥n del servicio para usuarios leg√≠timos", "Robo de informaci√≥n personal", "Instalaci√≥n de malware"]],
        ["¬øCu√°l es una caracter√≠stica principal de Kali Linux?", "Est√° dise√±ado para pruebas de penetraci√≥n y auditor√≠a de seguridad", ["Incluye m√°s de 6000 herramientas preinstaladas para pruebas de penetraci√≥n y forensia.", "Est√° dise√±ado para pruebas de penetraci√≥n y auditor√≠a de seguridad", "Es un sistema operativo para servidores web", "Es una distribuci√≥n para edici√≥n de video"]],
        ["¬øCu√°l es el prop√≥sito principal de OpenSSL en un entorno Linux?", "Proporcionar herramientas para cifrado y certificados digitales", ["Gestionar usuarios y grupos", "Proporcionar herramientas para cifrado y certificados digitales", "Instalar paquetes de software", "Monitorear procesos activos"]],
        ["¬øQu√© efecto tiene la llamada al sistema fork() en un proceso en Linux?", "Crea un proceso hijo duplicado del proceso actual", ["Termina el proceso actual y lanza uno nuevo sin relaci√≥n", "Crea un nuevo hilo dentro del mismo proceso", "Crea un proceso hijo duplicado del proceso actual", "Reemplaza el proceso actual con un nuevo programa"]],
        ["¬øQu√© principio de la ciberseguridad busca evitar el acceso no autorizado a la informaci√≥n?", "Confidencialidad", ["Integridad", "Trazabilidad", "Confidencialidad", "Disponibilidad"]],
        ["¬øCu√°l de las siguientes caracter√≠sticas asegura que los datos no han sido alterados durante su transmisi√≥n?", "Integridad", ["No repudio", "Integridad", "Disponibilidad", "Trazabilidad"]],
        ["¬øQu√© propiedad de la ciberseguridad garantiza que un usuario no pueda negar haber realizado una acci√≥n?", "No repudio", ["Integridad", "Autenticaci√≥n", "No repudio", "Confidencialidad"]],
        ["¬øCu√°l es la diferencia principal entre identificaci√≥n y autenticaci√≥n?", "La identificaci√≥n dice qui√©n eres; la autenticaci√≥n prueba que eres t√∫", ["La identificaci√≥n prueba la identidad; la autenticaci√≥n determina privilegios", "La identificaci√≥n solicita un recurso; la autenticaci√≥n lo entrega", "La identificaci√≥n dice qui√©n eres; la autenticaci√≥n prueba que eres t√∫", "Son dos t√©rminos equivalentes en ciberseguridad"]],
        ["¬øQu√© define mejor a una vulnerabilidad en ciberseguridad?", "Una debilidad en un sistema que puede ser explotada", ["Un intento deliberado de explotar un sistema", "La consecuencia de un ataque exitoso", "Una debilidad en un sistema que puede ser explotada", "La probabilidad de que ocurra un incidente"]],
        ["¬øQu√© representa el ‚Äúriesgo‚Äù en el contexto de la ciberseguridad?", "La combinaci√≥n entre una amenaza, vulnerabilidad e impacto", ["El valor de un activo comprometido", "El impacto inevitable de una amenaza", "La combinaci√≥n entre una amenaza, vulnerabilidad e impacto", "La cantidad de datos expuestos en una brecha"]],
        ["¬øCu√°l es una diferencia clave entre criptograf√≠a sim√©trica y asim√©trica?", "La sim√©trica utiliza la misma clave para cifrar y descifrar", ["La sim√©trica usa claves p√∫blicas, la asim√©trica no usa claves", "La sim√©trica es m√°s lenta y compleja", "La sim√©trica utiliza la misma clave para cifrar y descifrar", "La asim√©trica no requiere confianza entre las partes"]],
        ["¬øQu√© funci√≥n cumple OpenSSL en un sistema Linux?", "Proporciona herramientas para cifrado y certificados digitales", ["Monitorea procesos en ejecuci√≥n", "Administra usuarios y contrase√±as", "Proporciona herramientas para cifrado y certificados digitales", "Realiza auditor√≠as de red"]],
        ["¬øQu√© prop√≥sito cumple una funci√≥n hash en ciberseguridad?", "Verificar integridad de datos mediante un resumen √∫nico", ["Proteger datos con cifrado reversible", "Generar claves p√∫blicas y privadas", "Verificar integridad de datos mediante un resumen √∫nico", "Autenticar usuarios en una red"]],
        ["¬øQu√© asegura una firma digital en un documento?", "Autenticidad e integridad del contenido", ["Confidencialidad y anonimato", "Cifrado de extremo a extremo", "Autenticidad e integridad del contenido", "Trazabilidad del archivo"]],
        ["¬øCu√°l es la diferencia entre una firma digital y una firma electr√≥nica?", "La firma digital se basa en criptograf√≠a; la electr√≥nica puede ser un simple escaneo", ["La firma electr√≥nica es m√°s segura que la digital", "La firma digital siempre requiere un token f√≠sico", "La firma digital se basa en criptograf√≠a; la electr√≥nica puede ser un simple escaneo", "No hay diferencias legales entre ambas."]],
        ["¬øQu√© componente de la infraestructura de clave p√∫blica (PKI) emite y valida certificados digitales?", "AC (Autoridad Certificadora)", ["VPN", "AC (Autoridad Certificadora)", "Firewall", "IDS"]],
        ["¬øCu√°l de los siguientes modelos de control de acceso otorga permisos seg√∫n el rol que desempe√±a un usuario?", "RBAC (Control de Acceso Basado en Roles)", ["DAC (Control de Acceso Discrecional)", "RBAC (Control de Acceso Basado en Roles)", "MAC (Control de Acceso Obligatorio)", "ABAC (Control de Acceso Basado en Atributos)"]],
        ["¬øQu√© tecnolog√≠a permite establecer un canal cifrado entre dos puntos a trav√©s de una red p√∫blica?", "VPN", ["IDS", "VPN", "Token", "Blockchain"]],
        ["¬øQu√© caracter√≠stica distingue a un sistema IDS de uno IPS?", "El IDS detecta y alerta; el IPS detecta y act√∫a bloqueando", ["El IPS solo registra eventos; el IDS bloquea tr√°fico", "El IDS act√∫a de forma preventiva; el IPS es reactivo", "El IDS detecta y alerta; el IPS detecta y act√∫a bloqueando", "Ambos cumplen funciones id√©nticas"]]
    ];

    let respuestasCorrectas = 0;
    const form = document.getElementById("cuestionario");

    function renderizarCuestionario() {
      respuestasCorrectas = 0;
      form.innerHTML = '';

      preguntas.forEach(([pregunta, respuestaCorrecta, opciones], i) => {
        const preguntaElement = document.createElement('div');
        preguntaElement.className = 'pregunta';
        preguntaElement.innerHTML = `
          <label>${i + 1}. ${pregunta}</label>
          <div class="opciones">
            ${opciones.map((opcion, j) => `
              <label class="opcion">
                <input type="radio" name="respuesta${i}" value="${escapeHtml(opcion)}">
                ${escapeHtml(opcion)}
              </label>
            `).join('')}
          </div>
          <div class="botones">
            <button type="button" class="verificar" onclick="verificarRespuesta(${i}, '${escapeHtml(respuestaCorrecta)}')">
              Verificar
            </button>
          </div>
          <div class="feedback" id="feedback${i}"></div>
        `;
        form.appendChild(preguntaElement);
      });

      document.getElementById('resultados').style.display = 'none';
    }

    function escapeHtml(unsafe) {
      return unsafe
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    function verificarRespuesta(index, respuestaCorrecta) {
      const opciones = document.getElementsByName(`respuesta${index}`);
      let seleccion = "";
      opciones.forEach((opcion) => {
        if (opcion.checked) seleccion = opcion.value;
      });

      const feedback = document.getElementById(`feedback${index}`);
      if (seleccion === respuestaCorrecta) {
        feedback.innerHTML = "‚úì <span class='correcto'>¬°Correcto! Buen trabajo.</span>";
        feedback.style.display = 'block';
        respuestasCorrectas++;
      } else if (seleccion === "") {
        feedback.innerHTML = "‚ö† <span class='incorrecto'>Por favor selecciona una respuesta.</span>";
        feedback.style.display = 'block';
        return;
      } else {
        feedback.innerHTML = `‚úó <span class='incorrecto'>Incorrecto. La respuesta correcta es: ${respuestaCorrecta}</span>`;
        feedback.style.display = 'block';
      }

      verificarCompletado();
    }

    function verificarCompletado() {
      let todasRespondidas = true;
      preguntas.forEach((_, i) => {
        const opciones = document.getElementsByName(`respuesta${i}`);
        let seleccionada = false;
        opciones.forEach(opcion => {
          if (opcion.checked) seleccionada = true;
        });
        if (!seleccionada) todasRespondidas = false;
      });

      if (todasRespondidas) {
        mostrarResultados();
      }
    }

    function mostrarResultados() {
      const resultados = document.getElementById('resultados');
      const puntuacion = document.getElementById('puntuacion');
      const progressBar = document.getElementById('progress-bar');

      const porcentaje = Math.round((respuestasCorrectas / preguntas.length) * 100);

      puntuacion.textContent = `Has acertado ${respuestasCorrectas} de ${preguntas.length} preguntas (${porcentaje}%)`;
      progressBar.style.width = `${porcentaje}%`;

      if (porcentaje >= 80) {
        progressBar.style.backgroundColor = 'var(--success-color)';
      } else if (porcentaje >= 50) {
        progressBar.style.backgroundColor = 'var(--warning-color)';
      } else {
        progressBar.style.backgroundColor = 'var(--accent-color)';
      }

      resultados.style.display = 'block';
      window.scrollTo({
        top: document.body.scrollHeight,
        behavior: 'smooth'
      });
    }

    function reiniciarCuestionario() {
      renderizarCuestionario();
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // Cargar el tema guardado
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark-mode');
      document.getElementById('themeToggle').textContent = '‚òÄÔ∏è';
    }

    renderizarCuestionario();
  </script>
</body>
</html>
